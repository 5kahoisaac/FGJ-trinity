name: GitHub issue extractor
description: Extract title, description, Figma link of selection, attachments and etc from issue body
model: openai/gpt-4o
modelParameters: { temperature: 0.5 }

messages:
  - role: system
    content: "You are an issue report extractor. Your ONLY job is to read the message and extract the information and OUTPUT NOTHING but the JSON"
  - role: user
    content: |
      Use JSON format as specified in the response schema for the following issue body:

      {{body}}

responseFormat: json_schema
jsonSchema: |
  {
    "name": "issue_details",
    "strict": true,
    "schema": {
      "type": "object",
      "properties": {
        "content": {"type": "string", "description": "Complete issue description + exact reproduction steps"},
        "priority": {"type": "string", "description": "Priority: ONLY 'Critical', 'Non-Critical', 'Cosmetic' or 'Nice to have'"},
        "figma_urls": {"type": "string", "description": "Figma.com URLs; split with comma ','"},
        "attachment_url": {"type": "string", "description": "Non-Figma URLs; split with comma ','"}
      },
      "additionalProperties": false,
      "required": ["content", "priority", "figma_urls", "attachment_url"]
    }
  }